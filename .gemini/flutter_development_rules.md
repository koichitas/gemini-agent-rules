# Flutter開発ルール

-   **ウィジェットテストの実施**: 新規機能追加や既存機能の変更を行う際は、必ず関連するウィジェットテストを作成し、`flutter test` コマンドで正常に動作することを確認してください。
-   **ビルドの正常性確認**: 開発中のアプリケーションは、定期的に `flutter build apk` コマンドを実行し、問題なくビルドが成功することを確認し、リリース時のビルドエラーを未然に防いでください。
-   **コード品質の事前チェック**: ビルドを行う前に、必ず `flutter analyze` コマンドを実行し、コードの潜在的な問題やスタイルガイド違反をチェックすること。分析で指摘された問題は、ビルド前に修正すること。
-   **Linterの活用**: コード品質と一貫性を保つため、全てのFlutterプロジェクトにおいて `package:flutter_lints` を導入し、`analysis_options.yaml` にて有効化すること。コード記述時は、このLinterの指摘に従い修正を行うこと。
-   **自動修正と再分析**: `flutter analyze` で問題が報告された際は、手動で修正を試みる前に、まず `dart fix --apply` コマンドを実行して自動的に修正可能な箇所を適用すること。その後、再度 `flutter analyze` を実行して残りの問題を確認し、この自動修正と再分析で解消されなかった問題のみ、手動で検討し修正すること。
-   **段階的な開発ワークフロー**: 開発タスクは、以下の段階に分割して実行し、各段階の完了ごとに操作者の確認を得ること。
    1.  **仕様作成と合意**: まずユーザーレベルの画面仕様書を作成し、「仕様書を作成しました。この内容で実装に進んでもよろしいでしょうか？」と操作者に確認を求めること。
    2.  **最小限実装と確認**: 仕様の合意後、HelloWorldレベルの最小限の実装を行い、「最小限の実装と動作確認が完了しました。次はこの実装に機能を追加していきますか？」と操作者に確認を求めること。
    3.  **機能の段階的追加**: その後は、一度に一つの機能を追加し、その都度「〇〇機能の追加が完了しました。次に何をしますか？」と操作者に確認を求めること。

## 依存関係の追加に関するルール

-   **事前の承認**: `pubspec.yaml` に新しい依存関係を追加する際は、その依存関係が必要となる機能を実装する直前のタイミングで、必ず操作者にその必要性を説明し、明示的な承認を得なければならない。
-   **一括追加の禁止**: プロジェクトの初期セットアップ段階で、将来的に必要になると推測される依存関係をまとめて追加してはならない。依存関係は、必要になったその都度、承認を得て追加する。
