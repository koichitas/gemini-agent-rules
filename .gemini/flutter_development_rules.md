# Flutter開発ルール

-   **実装後検証プロセス**: コードの実装後、以下の手順で検証を行い、品質と安定性を確保すること。
    1.  **Linterによるコード品質チェック**: `analysis_options.yaml` にて有効化されている `package:flutter_lints` の指摘に常に従い、コードの一貫性と品質を維持すること。
    2.  **問題の自動修正**: `flutter analyze` で問題が報告された際は、手動で修正を試みる前に、まず `dart fix --apply` コマンドを実行して自動的に修正可能な箇所を適用すること。
    3.  **手動修正と再分析**: `dart fix --apply` で修正されなかった残りの問題については、再度 `flutter analyze` を実行して確認し、手動で検討・修正を行うこと。
    4.  **ビルドの正常性確認**: 全てのコード品質問題が解決した後、`flutter build apk` コマンドを実行し、問題なくビルドが成功することを確認すること。
-   **段階的な開発ワークフロー**: 開発タスクは、以下の段階に分割して実行し、各段階の完了ごとに操作者の確認を得ること。
    1.  **仕様作成と合意**: まずユーザーレベルの画面仕様書を作成し、「仕様書を作成しました。この内容で実装に進んでもよろしいでしょうか？」と操作者に確認を求めること。
    2.  **最小限実装と確認**: 仕様の合意後、HelloWorldレベルの最小限の実装を行い、「最小限の実装と動作確認が完了しました。次はこの実装に機能を追加していきますか？」と操作者に確認を求めること。
    3.  **機能の段階的追加**: その後は、一度に一つの機能を追加し、その都度「〇〇機能の追加が完了しました。次に何をしますか？」と操作者に確認を求めること。

## 依存関係の追加に関するルール

-   **依存関係追加の承認**: `pubspec.yaml` に新しい依存関係を追加する際は、以下の基準に従うこと。
    -   **基本的な機能提供パッケージ**: `http` や `provider`、`shared_preferences` など、Flutter開発で広く一般的に使用される基本的な機能を提供するパッケージについては、事前の承認なく追加し、その後操作者にその旨を報告すること。
    -   **UI関連、プラットフォーム固有、または新規性の高いパッケージ**: UIコンポーネント、プラットフォーム固有の機能（例: カメラ、位置情報）、またはプロジェクトで初めて導入されるような新規性の高いパッケージについては、その必要性を操作者に説明し、明示的な承認を得てから追加すること。
    -   **一括追加の禁止**: プロジェクトの初期セットアップ段階で、将来的に必要になると推測される依存関係をまとめて追加してはならない。依存関係は、必要になったその都度、上記の基準に従って追加すること。
